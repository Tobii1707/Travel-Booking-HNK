<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh toán & Quản lý Chuyến đi | VIVUTRAVEL</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <link rel="stylesheet" href="/css/plan_trip.css">
    <style>
        #order-table th { white-space: nowrap; }
        .text-center { text-align: center !important; }
    </style>
</head>

<body class="hust-payment-page">

<header>
    <a href="#" class="logo"><span>VIVU</span>TRAVEL</a>
    <nav class="bar">
        <a href="home">Trang chủ</a>
        <a href="booking">Đặt chỗ</a>
        <a href="hotel">Khách sạn</a>
        <a href="flight">Chuyến bay</a>
        <a href="trending">Xu hướng</a>
        <a href="news">Tin tức</a>
        <a href="package">Gói Tour</a>
        <a href="services">Dịch vụ</a>
        <a href="gallery">Thư viện ảnh</a>
        <a href="review">Đánh giá</a>
        <a href="contact">Liên hệ</a>
        <a href="plan-trip" class="indam">Thanh toán</a>
        <a href="chatbot" class="ai-assistant-link"><i class="fas fa-robot"></i> Trợ lý AI</a>
    </nav>
    <div class="icons">
        <i class="fas fa-user" id="user-icon"></i>
        <div id="user-menu" class="dropdown-menu">
            <a href="/profile">Hồ sơ của tôi</a>
            <a href="/user">Đăng xuất</a>
        </div>
    </div>
</header>

<section class="page-header">
    <div class="hero-content">
        <h1>Quản lý Chuyến đi</h1>
    </div>
</section>

<div class="container">
    <div class="table-container">
        <h2 class="heading-secondary">Các chuyến đi đã đặt</h2>

        <table id="order-table">
            <thead>
            <tr>
                <th width="5%">Chọn</th>
                <th width="5%">Mã</th>
                <th width="20%">Hành trình (Đi - Đến)</th>
                <th width="10%" class="text-center">Khách sạn</th>
                <th width="10%" class="text-center">Máy bay</th>
                <th width="15%">Tổng tiền</th>
                <th width="15%">Trạng thái</th>
                <th width="10%">Đánh giá</th>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>

        <div class="pagination">
            <button id="prev-page" class="btn">Trước</button>
            <span id="page-info">Trang 1 / 1</span>
            <button id="next-page" class="btn">Sau</button>
        </div>
    </div>

    <div class="btn-container">
        <button class="btn cancel" id="cancel-btn">Hủy chuyến</button>
        <button class="btn pay" id="pay-btn">Thanh toán</button>
        <button class="btn choose-flight" id="choose-flight-btn">Chọn Chuyến bay</button>
        <button class="btn choose-hotel" id="choose-hotel-btn">Chọn Khách sạn</button>
    </div>
</div>

<div id="payment-modal" class="modal">
    <div class="modal-content">
        <h2>Quét mã QR để thanh toán</h2>
        <img id="qr-code" src="/images/qr.jpg" alt="Mã QR thanh toán">
        <div class="modal-btn-group">
            <button id="confirm-payment-btn" class="btn pay">Xác nhận đã chuyển</button>
            <button id="close-modal-btn" class="btn cancel">Đóng</button>
        </div>
    </div>
</div>

<div id="review-modal" class="modal">
    <div class="modal-content review-modal-content">
        <h2 id="review-modal-title">Viết Đánh giá</h2>
        <input type="hidden" id="review-order-id">
        <input type="hidden" id="review-id">
        <input type="hidden" id="review-hotel-name">

        <div class="review-hotel-info">
            <p>Khách sạn: <strong id="review-hotel-display"></strong></p>
        </div>

        <div class="rating-container">
            <label>Điểm đánh giá:</label>
            <div class="star-rating">
                <i class="fas fa-star" data-rating="1"></i>
                <i class="fas fa-star" data-rating="2"></i>
                <i class="fas fa-star" data-rating="3"></i>
                <i class="fas fa-star" data-rating="4"></i>
                <i class="fas fa-star" data-rating="5"></i>
            </div>
            <input type="hidden" id="review-rating" value="0">
        </div>

        <div class="comment-container">
            <label>Nội dung đánh giá:</label>
            <textarea id="review-comment" placeholder="Chia sẻ trải nghiệm của bạn..." maxlength="1000" rows="4"></textarea>
            <small><span id="char-count">0</span>/1000</small>
        </div>

        <div class="modal-btn-group">
            <button id="submit-review-btn" class="btn pay">Gửi đánh giá</button>
            <button id="delete-review-btn" class="btn cancel" style="display:none;">Xóa đánh giá</button>
            <button id="close-review-modal-btn" class="btn cancel">Hủy</button>
        </div>
    </div>
</div>

<section class="footer">
    <div class="footer-container">
        <div class="footer-col">
            <h2>Thông tin liên hệ</h2>
            <p style="margin-bottom: 10px; font-size: 1.1em;"><strong>Hà Nam Khánh</strong></p>
            <p><i class="fas fa-phone" style="margin-right: 8px;"></i> 0795129626</p>
            <p><i class="fas fa-envelope" style="margin-right: 8px;"></i> hanamkhanh2004@gmail.com</p>
        </div>
    </div>
</section>

<a href="/chatbot" class="chatbot-float" title="Trợ lý Du lịch AI">
    <i class="fas fa-robot"></i>
</a>
<style>
    .chatbot-float {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 24px;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 1000;
        text-decoration: none;
    }
    .chatbot-float:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
    }
</style>

<script src="/js/plan_trip.js"></script>

</body>
</html>